{% extends "_base.html" %}

{% block title %}企業一覧 - フォーム管理{% endblock %}

{% block content %}
<div class="user-greeting">
    <p>こんにちは、<strong>{{ current_user.id }}</strong> さん！</p>
</div>

<div class="keywords-display">
    <p>🔍 <strong>Bing検索キーワード:</strong> 「{{ active_keywords | join(' ') }}」</p>
</div>

<h1>🏢 企業一覧</h1>

<table>
    <thead>
        <tr>
            <th>企業名</th>
            <th>トップページ</th>
            <th>問い合わせ</th>
            <th>住所</th>
            <th>電話番号</th>
            <th>FAX</th>
            <th>カテゴリ</th>
            <th>説明</th>
        </tr>
    </thead>
    <tbody>
        {% for f in forms %}
        <tr>
            <td><strong>{{ f.get("company_name", "未設定") }}</strong></td>
            <td>
                {% if f.get('url_top') %}
                    <a href="{{ f.get('url_top') }}" target="_blank">🌐 サイトを開く</a>
                {% else %}
                    <span style="color: #999;">未設定</span>
                {% endif %}
            </td>
            <td>
                {% if f.get('url_form') %}
                    <a href="{{ f.get('url_form') }}" target="_blank">📝 フォームを開く</a>
                {% else %}
                    <span style="color: #999;">未設定</span>
                {% endif %}
            </td>
            <td>{{ f.get("address", "未設定") }}</td>
            <td>{{ f.get("tel", "未設定") }}</td>
            <td>{{ f.get("fax", "未設定") }}</td>
            <td>
                {% if f.get("category_keywords") %}
                    <span class="keywords-tag">{{ f.get("category_keywords") }}</span>
                {% else %}
                    <span style="color: #999;">未設定</span>
                {% endif %}
            </td>
            <td>{{ f.get("description", "未設定") }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% if not forms %}
<div style="text-align: center; padding: 3rem; color: #999;">
    <p style="font-size: 1.2rem;">📝 まだ企業データがありません</p>
    <p>キーワードを設定して検索を開始してください。</p>
</div>
{% endif %}
{% endblock %}